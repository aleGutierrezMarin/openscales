<?xml version="1.0" encoding="utf-8"?>
<!--- Advanced statistic and style example. -->
<s:Group xmlns="http://openscales.org" xmlns:fx="http://ns.adobe.com/mxml/2009" 
		 xmlns:s="library://ns.adobe.com/flex/spark" width="100%" height="100%" creationComplete="initMap()">
	
	<Map id="fxMap" width="100%" height="100%" resolution="0.087890625" center="4.84479575848897,45.7531798723947" projection="EPSG:900913">
		
		<Mapnik name="Mapnik" />
		
		<WheelHandler/>
		
		<Spinner x="{width / 2}" y="{height / 2}"/>
		<MousePosition id="mousePosition" x="10" y="{height-50}" availableProjSrsList="EPSG:4326,EPSG:900913" displayProjection="EPSG:4326"/>
		
		<WFS id="ignGeoplaRegion" name="IGN - Geopla (DÃ©partements)"
				url="http://openscales.org/geoserver/wfs" typename="pg:simplif_dept" projection="EPSG:2154"
				version="1.0.0"	style="{this.createStyleLatitude()}"/>
		
		<SelectFeaturesHandler id="selectFeatureHandler" active="true"/>
		
		<TraceInfo x="{width-200}" y="0" />
		
		<PanZoom id="panZoom" x="10" y="10" />
		
		<s:Panel title="featureInfos" bottom="0" right="0">
			<FeatureInfo id="featureInfoComponent"
							creationComplete="(selectFeatureHandler.handler as SelectFeaturesHandler).onSelectedFeature = featureInfoComponent.showInfo"/>
		</s:Panel>

	</Map>
		
	<fx:Script>
		<![CDATA[
			import org.openscales.core.filter.expression.IExpression;
			import org.openscales.core.handler.feature.SelectFeaturesHandler;
			import org.openscales.core.style.Rule;
			import org.openscales.core.style.Style;
			import org.openscales.core.style.fill.SolidFill;
			import org.openscales.core.style.marker.Marker;
			import org.openscales.core.style.marker.WellKnownMarker;
			import org.openscales.core.style.stroke.Stroke;
			import org.openscales.core.style.symbolizer.PointSymbolizer;
			import org.openscales.core.style.symbolizer.PolygonSymbolizer;
			import org.openscales.core.style.symbolizer.Symbolizer;
			
			import statisticsexample.CircleSizeExpression;
			
			[Bindable]
			private var styles:Array = [];
			
			private function initMap():void {
				this.createStyleLatitude();
			}
			
			private function createStyleLatitude():void {
				var style:Style = new Style();
				style.name = "Latitude related coloration";
				var fill:SolidFill, stroke:Stroke, symbolizer:Symbolizer, rule:Rule;
				
				rule = new Rule();
				rule.name = "Centroid Y-coordinate in [70000;75000]";
				fill = new SolidFill(0x176273, .8);
				stroke = new Stroke(0x0A2C33, 2);
				symbolizer = new PolygonSymbolizer(fill, stroke);
				rule.symbolizers.push(symbolizer);
				style.rules.push(rule);
				
				
				rule = new Rule();
				rule.name = "Population sized circles";
				var exp:IExpression = new CircleSizeExpression(5, 20, 74000, 2560000);
				var marker:Marker = new WellKnownMarker(WellKnownMarker.WKN_CIRCLE, new SolidFill(0x84BF7A, .8), new Stroke(0x233321, 2), exp);
				symbolizer = new PointSymbolizer(marker);
				rule.symbolizers.push(symbolizer);
				style.rules.push(rule);
				
				this.styles.push(style);
				this.ignGeoplaRegion.style = style;
				this.ignGeoplaRegion.nativeLayer.redraw();
			}
		]]>
	</fx:Script>
	
</s:Group>

